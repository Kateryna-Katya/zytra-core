{"version":3,"file":"main-DSsXc9x-.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ZYTRA CORE - Absolute Final Script v6\n * Исправлено: закрытие меню и мобильная адаптация\n */\n\ngsap.registerPlugin(ScrollTrigger);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    // 1. ПЛАВНЫЙ СКРОЛЛ (Lenis)\n    const lenis = new Lenis();\n    function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }\n    requestAnimationFrame(raf);\n\n    // 2. ИНИЦИАЛИЗАЦИЯ ИКОНОК\n    lucide.createIcons();\n\n    // 3. THREE.JS: ФОН В HERO\n    const initHeroScene = () => {\n        const container = document.querySelector('#hero-canvas');\n        if (!container) return;\n\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        container.appendChild(renderer.domElement);\n\n        const geometry = new THREE.BufferGeometry();\n        const pts = new Float32Array(1800 * 3);\n        for(let i=0; i<5400; i++) pts[i] = (Math.random() - 0.5) * 12;\n        geometry.setAttribute('position', new THREE.BufferAttribute(pts, 3));\n\n        const material = new THREE.PointsMaterial({\n            color: 0x00f2ff,\n            size: 0.018,\n            transparent: true,\n            opacity: 0.5,\n            blending: THREE.AdditiveBlending\n        });\n\n        const points = new THREE.Points(geometry, material);\n        scene.add(points);\n        camera.position.z = 5;\n\n        const animate = () => {\n            requestAnimationFrame(animate);\n            points.rotation.y += 0.001;\n            renderer.render(scene, camera);\n        };\n        animate();\n\n        window.addEventListener('resize', () => {\n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(window.innerWidth, window.innerHeight);\n        });\n    };\n    initHeroScene();\n\n    // 4. МОБИЛЬНОЕ МЕНЮ (Исправленная логика закрытия)\n    const burger = document.querySelector('.burger');\n    const menu = document.querySelector('#menuOverlay');\n    const mobileLinks = document.querySelectorAll('.nav-mobile__link');\n\n    const toggleMenu = () => {\n        const isActive = menu.classList.toggle('is-active');\n        burger?.classList.toggle('is-active');\n        \n        if (isActive) {\n            lenis.stop();\n            document.body.style.overflow = 'hidden';\n        } else {\n            lenis.start();\n            document.body.style.overflow = '';\n        }\n    };\n\n    // Открытие/закрытие по бургеру\n    burger?.addEventListener('click', toggleMenu);\n\n    // ЗАКРЫТИЕ ПРИ КЛИКЕ НА ЛЮБУЮ ССЫЛКУ\n    mobileLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            if (menu.classList.contains('is-active')) {\n                toggleMenu();\n            }\n        });\n    });\n\n    // 5. COOKIE POPUP\n    const cookiePopup = document.querySelector('#cookiePopup');\n    const cookieBtn = document.querySelector('#cookieAccept');\n\n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => cookiePopup?.classList.add('is-visible'), 2000);\n    }\n\n    cookieBtn?.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        cookiePopup?.classList.remove('is-visible');\n    });\n\n    // 6. АНИМАЦИИ ПОЯВЛЕНИЯ (Reveal)\n    const revealItems = document.querySelectorAll('.js-reveal');\n    revealItems.forEach(item => {\n        gsap.from(item, {\n            scrollTrigger: { trigger: item, start: \"top 92%\" },\n            y: 30, opacity: 0, duration: 0.8, ease: \"power2.out\"\n        });\n    });\n\n    // 7. СТЕКОВЫЕ КАРТОЧКИ (Innovations)\n    const stacks = document.querySelectorAll('.stack-card');\n    stacks.forEach((card, i) => {\n        if(i < stacks.length - 1) {\n            gsap.to(card, {\n                scale: 0.9,\n                opacity: 0.6,\n                scrollTrigger: {\n                    trigger: card,\n                    start: \"top 100px\",\n                    scrub: true,\n                    pinSpacing: false\n                }\n            });\n        }\n    });\n\n    // 8. КОНТАКТНАЯ ФОРМА\n    const form = document.querySelector('#mainForm');\n    const phoneInput = document.querySelector('#userPhone');\n    const captchaLabel = document.querySelector('#captchaLabel');\n\n    if(phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9]/g, '');\n        });\n    }\n\n    let n1 = Math.floor(Math.random() * 5) + 1, n2 = Math.floor(Math.random() * 5) + 1;\n    let sum = n1 + n2;\n    if(captchaLabel) captchaLabel.innerText = `Решите: ${n1} + ${n2} = ?`;\n\n    form?.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const ans = document.querySelector('#userCaptcha').value;\n        if(parseInt(ans) !== sum) { alert('Капча неверна!'); return; }\n        \n        document.querySelector('#submitBtn').style.display = 'none';\n        document.querySelector('#formSuccess').classList.add('is-visible');\n        form.reset();\n    });\n\n    // 9. ХЕДЕР ПРИ СКРОЛЛЕ\n    window.addEventListener('scroll', () => {\n        document.querySelector('#header')?.classList.toggle('header--scrolled', window.scrollY > 50);\n    });\n\n    console.log(\"Zytra Core v6: All fixed.\");\n});"],"names":["lenis","raf","time","container","scene","camera","renderer","geometry","pts","i","material","points","animate","burger","menu","mobileLinks","toggleMenu","isActive","link","cookiePopup","cookieBtn","item","stacks","card","form","phoneInput","captchaLabel","n1","n2","sum","ans","_a"],"mappings":"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"}